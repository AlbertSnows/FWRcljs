(ns serv.serve-index)

(def join (.-join (js/require "path")))
(def fs (js/require "fs"))
(def recipePath (join js/__dirname "../../../" "src/data" "recipes.json"))
;(js/console.log recipePath)z6
;(js/console.log "Hello!")
(def cardData (.parse js/JSON (.readFileSync fs recipePath)))
; @function generateCardHTML
;  Generates a HTML string array representing the cards
;  @returns {string[]} Array of HTML strings
(defn generateCardHTML
  []
  (.join
   (.map
    cardData
    (fn [card]
      (str
       "\n <a class=\"card\" href=\"./"
       (aget (.-images card) 0)
       "\">\n <image src=\"/images/"
       (aget (.-images card) 0)
       "\" alt=\"thumbnail\">\n <span>"
       (.-name card)
       "</span>\n <span>"
       (.-price card)
       "</span>\n </a>\n")))
   ""))

; @function serveIndex
;  Serves an index page
(defn ^:export serveIndex
  [req res]
  (.setHeader res "Content-Type" "text/html")
  (.end res (str
             "\n  
<!doctype html>\n  
<html lang=\"en\">\n    
<head>\n      
<meta content=\"text/html;charset=utf-8\" http-equiv=\"Content-Type\">\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"css/main.css\">\n      
<title>My Website!!!</title>\n    </head>\n    <body class=\"background mexico\">\n      <header id=\"header\">\n          <div>\n            <strong id=\"logo\">\n                Kistner's Flowers\n            </strong>  <!--<img src=\"../public/images/logo2.png\" alt=\"logo\" id=\"logo\"></img>-->\n          </div>\n          <nav class=\"navbar\"> <!--https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_dropdown_right-->\n              <ul>\n                  <li class=\"dropdown\" style=\"float: right;\">\n                      <button class=\"dropbtn\">\n                          <a href=\"#\" target=\"_self\" class=\"dropdown unselected\">About</a>\n                      </button>\n                      <div class=\"dropdown-content\">\n                        <a href=\"#\">About Us</a>\n                        <a href=\"#\">Meet The Staff</a>\n                        <a href=\"#\">Visit Our Store</a>\n                        <a href=\"#\">Help</a>\n                        <a href=\"#\">(800) 532-3409</a>\n                      </div>\n                  </li>\n                  <li class=\"dropdown\" style=\"float: right;\">\n                      <button class=\"dropbtn\">\n                          <a href=\"#\" target=\"_self\" class=\"dropdown unselected\">Sororities</a>\n                      </button>\n                      <div class=\"dropdown-content\">\n                        <a href=\"#\">Gamma Phi Beta</a>\n                        <a href=\"#\">Alpha Chi Omega</a>\n                        <a href=\"#\">Alpha Delta Pi</a>\n                        <a href=\"#\">Delta, Delta, Delta</a>\n                        <a href=\"#\">Alpha Xi Delta</a>\n                        <a href=\"#\">Chi Omega</a>\n                        <a href=\"#\">Zeta Tau Alpha</a>\n                        <a href=\"#\">Kappa Alpha Theta</a>\n                        <a href=\"#\">Kappa Kappa Gamma</a>\n                        <a href=\"#\">Kappa Delta</a>\n                        <a href=\"#\">Pi Beta Phi</a>\n                        <a href=\"#\">Sigma Kappa</a>\n                      </div>\n                  </li>\n                  <li class=\"dropdown\" style=\"float: right;\">\n                      <button class=\"dropbtn\">\n                          <a href=\"#\" target=\"_self\" class=\"dropdown unselected\">Occasion</a>\n                      </button>\n                      <div class=\"dropdown-content\">\n                          <a href=\"#\">New Baby!</a>\n                          <a href=\"#\">Daily Expressions</a>\n                          <a href=\"#\">Garden Paradise</a>\n                          <a target=\"__self\" href=\"https://www.pinterest.com/kistnersflowers/\">Wedding</a>\n                          <a target=\"__self\" href=\"https://www.pinterest.com/kistnersflowers/local-altars/\">Funeral</a>\n                          <a href=\"#\">Birthday</a>\n                          <a href=\"#\">Shop All Occasions</a>\n                      </div>\n                  </li>\n              </ul>\n          </nav>\n      </header>\n      <main>\n        <div id=\"home-page-div\">\n            "
             (generateCardHTML)
             "\n        </div>\n        <div id=\"privacy-div\">\n        <!doctype html>\n        <html lang=\"en\">\n          <head>\n            <meta content=\"text/html;charset=utf-8\" http-equiv=\"Content-Type\">\n            
<link rel=\"stylesheet\" type=\"text/css\" href=\"css/main.css\">\n            <title>My Website</title>\n          </head>\n            
<body class=\"background mexico\">\n        
<script>entrance.init ();</script>        
<p>\n                    
<h1>\n                        Substitution Policy\n                    </h1>\n           <p>\n                        Occasionally, substitutions may be necessary to create your bouquet due to the\n                        availability of certain flowers in various parts of the country. Care is taken to\n                         maintain the style, theme and color scheme of the arrangement, using flowers of equal\n                         value. Additionally, the substitution of certain keepsake items may be necessary due to\n                          increased demand, especially during major holidays. In single-flower arrangements,\n                          such as an all rose bouquet, or orchids, we will make every attempt to match the\n                          flower type, but may substitute with another color.\n                    </p>\n                    <h1>\n                        Privacy Policy\n                    </h1>\n                    <p>\n                        This privacy statement has been created in order to demonstrate our firm commitment to protecting customer privacy.\n                    </p>\n                    <h2>\n                        Information We Collect\n                    </h2>\n                    <p>\n                        If you open an account on our site or make a purchase, we need your contact information\n                         including your name, e-mail address and mailing address to complete your transaction.\n                    </p>\n                    <p>\n                        When you visit our website, we also collect some basic information that does not\n                        identify individual users. We use this information to determine our users demographics\n                         and interests, so that we can better understand and serve our users.\n                    </p>\n                    <h2>\n                        \"Cookies\"\n                    </h2>\n                    <p>\n                        Cookies are small files which store certain information about your activity on the\n                        website and are stored on your computers hard drive. Our cookies do not contain any\n                         personally identifying information. We use cookies to let us know that you are a prior\n                          customer, so that you dont have to reenter information you gave us on your prior\n                           visits. Most web browsers automatically accept cookies, but most allow you to\n                            instruct your browser to prevent the use of cookies. However, if you disable\n                             cookies, you will not be able to use certain features of this website.\n                    </p>\n                    <p>\n                        Our Use and Disclosure of Your Information\n                    </p>\n                    <p>\n                        When opening an account or making a purchase, you have an opportunity to opt-in or\n                         opt-out from receiving emails from us. If you opt-in to receive information from us,\n                          we may use your purchase history, contact information and other registration\n                           information to provide you with more relevant information and email content. We\n                            may send emails to our users regarding changes in our services or other information\n                             we believe will be of interest to our users. If you prefer not to receive these\n                              emails, you can send us an email with the subject line no emails or reply to our\n                               email with the subject line no emails.\n                    </p>\n                    <p>\n                        If you send us personal correspondence, such as emails or letters, or if other users or\n                         third parties send us correspondence about your activities on our site, we may collect\n                          such information. We may use that information and other information that we obtain\n                           from your use of our site to resolve disputes, troubleshoot problems and enforce our agreement for Terms of Use.\n                    </p>\n                    <p>\n                        We may share aggregate statistics about our sales, traffic patterns and related site\n                         information with other businesses, but these statistics will include no personally\n                          identifying information.\n                    </p>\n                    <p>\n                        We may share your information with Teleflora and other reputable vendors for the purpose\n                         of sending out special offers via email and/ or in connection with the services\n                          provided by our site such as the delivery of flowers. Your information will not be\n                           shared for any other purpose and will be kept secured.\n                    </p>\n                    <p>\n                        We cannot ensure that all of your private communications and other personally\n                         identifiable information will never be disclosed in ways not otherwise described in\n                          this Privacy Statement. For example, we may be required to disclose information to\n                           the government or third parties under certain circumstances, or third parties may\n                            unlawfully intercept or access transmissions or private communications. We can (and\n                                 you authorize us to) disclose any information about you to law enforcement or\n                                  other government officials as we, in our sole discretion, believe necessary\n                                   or appropriate in connection with an investigation of fraud, intellectual\n                                    property infringements, or other activity that may be illegal or may expose us to legal liability.\n                    </p>\n                    <h2>\n                        Security\n                    </h2>\n                    <p>\n                        This site has security measures in place to protect the loss, misuse and alteration of\n                         the information under our control.\n                    </p>\n                    <p>\n                        All user credit card information is securely communicated using secure socket layer\n                         (SSL) software, which is the industry standard and among the best software available\n                          for secure commerce transactions.\n                    </p>\n                    <p>\n                        All user information stored on our server is stored in an encrypted format.\n                         Notwithstanding these efforts, we caution you that perfect security does not exist on the Internet.\n                    </p>\n                    <h2>\n                        Linked Sites\n                    </h2>\n                    <p>\n                        If this site contains any links to other websites, we are not responsible for the\n                         privacy practices or the content of such websites.\n                    </p>\n                    <h2>\n                        Changes to Privacy Statement; Consent\n                    </h2>\n                        <p>\n                            We may update this Privacy Statement from time to time. You should check this page\n                             periodically for changes. By using our site, you consent to the collection and use\n                              of your information by us as described in this Privacy Statement.\n                        </p>\n                    <h2>\n                        Questions and Comments\n                    </h2>\n                    <p>\n                        We welcome your questions and comments about this Privacy Statement.\n                    </p>\n                </p>\n            </body>\n        </html>\n        </div>\n      </main>\n      <footer class=\"footer\">\n          <div id=\"footer-content\">\n              <div id=\"footer-contact\">\n                  <div id=\"address\">\n                      <h5 id=\"name\" itemprop=\"name\">Kistner's Flowers</h5>\n                      <p id=\"street\" itemprop=\"streetAddress\">1901 Pillsbury Dr.&nbsp;</p>\n                      <p id=\"town\">\n                      <span itemprop=\"addressLocality\">Manhattan</span>,\n                      <span itemprop=\"addressRegion\">KS</span>&nbsp; <span itemprop=\"postalCode\">66502</span></p>\n                      <p>\n                  </div>\n                  <div id=\"phone-number\">\n                      <span itemprop=\"telephone\">\n                      <a href=\"tel:(785) 776-7044\">(785) 776-7044</a></span>\n                      <br/>\n                      <span><a href=\"tel:(800) 532-3409\">(800) 532-3409</a></span></p>\n                  </div>\n                  <div class=\"footer-social\">\n                      <a id=\"facebook\" href=\"https://www.facebook.com/KistnersFlowers1946/?fref=ts\" target=\"_blank\">\n                          <img src=\"images/facebookGold.png\" alt=\"IMG\" width=\"25\" height=\"25\">\n                      </a>\n                      <a href=\"https://www.instagram.com/kistnersflowers/\" target=\"_blank\">\n                          <img src=\"images/instagramGold.png\" alt=\"IMG\" width=\"25\" height=\"25\">\n                      </a>\n                      <a id=\"pintrest\" href=\"https://www.pinterest.com/kistnersflowers/boards/\" target=\"_blank\">\n                          <img src=\"images/pinterestGold.png\" alt=\"IMG\" width=\"25\" height=\"25\">\n                      </a>\n                  </div>\n              </div>\n              <div class=\"vertical-line\"></div>\n              <div class=\"footer-navigation\">\n                  <ul>\n                      <li>\n                          <h5>Learn More About</h5>\n                              <ul>\n                                  <li><a href=\"/about-us\">About Us</a></li>\n                                  <li><a href=\"/faq#Privacy Policy / Security\">Safe Shopping</a></li>\n                                  <li><button id=\"privacy-button\"><a href=\"#\">Privacy</a></button></li>\n                                  <!--<li><input  id=\"privacy-input\" type=\"button\" value = \"Button Text\" ></input></li>-->\n                                  <li><a href=\"/about-us#Delivery Policy\">Delivery</a></li>\n                              </ul>\n                          </li>\n                      <li>\n                          <h5>Customer Service</h5>\n                          <ul>\n                              <li><a href=\"/faq#Policy Info\">Substitutions</a></li>\n                              <li><a href=\"/sitemap\">Site Map</a></li>\n                              <li><a href=\"/faq\">Help/FAQs</a></li> <!--https://www.kistnersflowers.com/about-us#Delivery%20Policy-->\n                          </ul>\n                      </li>\n                  </ul>\n              </div>\n          </div>\n      </footer>\n      <script type=\"application/javascript\" src=\"client.js\"></script>\n      </body>\n  </html>\n    ")
))

; export the serveIndex function
;(set! (.-exports module) serveIndex)
